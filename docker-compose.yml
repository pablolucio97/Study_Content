version: '3.7'

services:
  db: # starts a database service configuration
    image: mysql:8.0 # uses mysql 5.7 as the image to handle the database service
    command: --innodb-use-native-aio=0 #required command for run  mysql image correctly
    container_name: db
    restart: always # automatically restart the database container if it falls
    tty: true # enables the container terminal
    volumes:
      - ./myapp_mysql:/var/lib/mysql # persists all data from /var/lib/mysql into myapp_mysql folder, even if the container is deleted
    environment: # are automatically generated at the container building
      MYSQL_DATABASE: ${MYSQL_DATABASE} # must come from .env file
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD} # must come from .env file
    networks:
      - node-network # defines that this container is inside the node-network

networks:
  node-network:
    driver: bridge
