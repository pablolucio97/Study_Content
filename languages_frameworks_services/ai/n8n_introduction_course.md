# N8N Introduction Course

## General Concepts

**N8N**: n8n is a digital automation platform that allows you to build, test and deploy AI agents with minimal or not coding.

**AI Agents**: AI agents are autonomous programs that can make decisions, perform tasks, and interact with third apps based on received instructions.

**Automation**: Automation is a set o predictable set of predetermined actions that transfers data from one point to another.


## N8N concepts
**Trigger** It's an event. It's used to call next block/actions. It will initiate or launch your workflow.
**Nodes** Nodes are building blocks that contains your instructions.
**Workflow** It's a set of connected nodes that defines your automation logic.
**Filtering** It's a filter that allows a block proceed or not to the next workflow point.
**Actions** Tasks you want to perform with a piece of data, such as Get, Send, Update, or Delete.
**Apps** It can be any official associated app to n8n. Examples: Notion, Slack, and so on.
**Functions Apps** It can be any function available in an official third app connected to n8n. Examples: A Google Sheet function to delete a row.

## Types of triggers
- **Manual**: It's fired manually to test or execute workflows on demand.
- **Scheduled**: It's fired by a schedule on specific day and date. Ex: Every Friday, every 1 hour, every Monday 5PM.
- **Instant**: It's instantly fired based on some event. Ex: On form submission, on Google Sheet property updated.

## Types of nodes
- **Entry point**: It's the first node of your workflow, the trigger node.
- **Function**: It's a node that executes an actions app function.
- **Exit point**: It's the last node of your workflow. It should be executed to tell your workflow was executed successfully.

## Useful Nodes
- **HTTP Request**: Send or receive data via APIs.
- **Set**: Define or update data within the workflow.
- **IF**: Add conditional logic to control the flow.
- **Webhook**: Receive real-time data from external sources.
- **Merge**: Combine data from multiple branches.
- **Code**: Add custom JavaScript for advanced logic.
- **Wait**: Pause workflow execution for a defined duration.

## Running N8N locally with Ngrok

1. Download the n8n official image running the command `docker pull n8nio/n8n`
2. Wait for the download, and after it, click on "Run" for run the image.
3. Configure your Ngrok credentials and run the command `ngrok http 5678` to create a Ngrok tunnel for 5678 port.
4. Provide your optional setting informing your container name, port (5678), volume path mirroring and environment variables for your image (if you are using webhook urls, add this environment variable too). Example:
![alt text](imgs/image.png)
1. Click on "Run" to start the image and wait for the container starts.
2. The n8n application will be available at your generated Ngrok URL.
3. Register and authenticate on the application.

## Running N8N locally with Ngrok and definitive domain

This tutorial is useful for keep using the same Ngrok domain instead needing configuring it again every time the container restarts or the temporary domain expires.

1. Clone this [repository](https://github.com/Joffcom/n8n-ngrok).
2. Edit .env file to use your Ngrok domain and your Ngrok Auth token.
3. Edit the ngrok.yml file passing your Ngrok's domain.
4. Run docker-compose up to start the container.
5. Use the application normally.

## Listening to webhooks using Tally forms
1. Check if the container image was created supplying a environment variable for WEBHOOK_URL.
2. Create a new Webhook node (not Respond to Webhook node), select the method POST because we are listening a form submission that is performed using POST method, and copy the Test URL.
3. Register and authenticate on [Tally](https://tally.so/dashboard). At dashboard, click on "New form", then "Use a template", select a template, click on "Use template", and click on "Publish".
4. Click on "Integrations", "Webhooks", click on "Connect", and provide your Test URL generated by your n8n Webhook node, and click on "Connect".
5. On n8n Webhook node click on "Listen for test event".
6. Fill the Tally form an the response will be returned at n8n.

## Configuring Nodes that depends on Google authentication and authorization
1. Access your GCP account.
2. Create a new project and select it.
3. Click on "Services and APIs", click on "Library".
4. Search for the API you want to integrate, eg. "Google Sheets", "Gmail" and so on.
5. Select the desired API and enable it.
6. Click on "Credentials", click on "Create", and select "Create OAuth client ID".
7. Select a Application type (generally web), provide a name, add an authorized redirect URI (should contain the HTTPS protocol), and click on "Create".
8. Copy the client id and client secret and download the generated JSON file.
9. Click on the new credential created and click on "Data access", "Add or remove scopes", and enable all scopes and the scope you want to work with, eg. "Google Sheets", "Gmail" and so on.
10. Click on "Audience" and click on "Publish".
11. On n8n, on the node that depends on Google, click on "Select credential", click on "Create new credential", and provide the client id and client secret generated.
12. Execute your service. 

## Using Templates
1. Access the left menu and click on "Templates" you'll be redirected to n8n templates website.
2. Choose a template and click on "Use for free".
3. Provide the required credentials. It can very based on the services the template requires, like access to Google Calendar, OpenAI, Google Sheets and so on (you can skip it to be configured later).  

# General tips
- Prefer configuring n8n with Docker and Ngrok using [this repository](https://github.com/Joffcom/n8n-ngrok) because it configures a permanent Ngrok domain persisting the url without resetting it every time the container stops.
- Configure your URL including the protocol because it avoids conflicts and mismatching between the URL server and URL authorized on services like Google.
- At working with forms using webhooks, the form id and webhook path must be exactly the same otherwise the communication wont be succeeded. 
- You should enable each Google API/Service that you need to work with separately and add scopes for it.  
